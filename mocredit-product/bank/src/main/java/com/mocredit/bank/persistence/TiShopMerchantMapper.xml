<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mocredit.bank.persistence.TiShopMerchantMapper" >
  <resultMap id="BaseResultMap" type="com.mocredit.bank.entity.TiShopMerchant" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 25 10:03:40 CST 2015.
    -->
    <id column="uuid" property="uuid" jdbcType="INTEGER" />
    <result column="merchant_id" property="merchantId" jdbcType="VARCHAR" />
    <result column="merchant_name" property="merchantName" jdbcType="VARCHAR" />
    <result column="merchant_password" property="merchantPassword" jdbcType="VARCHAR" />
    <result column="shop_id" property="shopId" jdbcType="INTEGER" />
    <result column="terminal_id" property="terminalId" jdbcType="VARCHAR" />
    <result column="token" property="token" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="SMALLINT" />
    <result column="bank" property="bank" jdbcType="VARCHAR" />
    <result column="batch_no" property="batchNo" jdbcType="VARCHAR" />
    <result column="pos_no" property="posNo" jdbcType="VARCHAR" />
    <result column="lmk_tmk" property="lmkTmk" jdbcType="VARCHAR" />
    <result column="lmk_tpk" property="lmkTpk" jdbcType="VARCHAR" />
    <result column="lmk_tak" property="lmkTak" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByShopId" resultMap="BaseResultMap" parameterType="int" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 25 10:03:40 CST 2015.
    -->
    select * from ti_shop_merchant where shop_id=#{id} and status=1
  </select>
  <select id="selectMerchantsByColumn" resultMap="BaseResultMap" parameterType="java.util.Map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 25 10:03:40 CST 2015.
    -->
    select * from ti_shop_merchant 
    <where>
    <foreach collection="params" index="key" item="value" separator="and">
      ${key}=#{value}
    </foreach>
    </where>
  </select>
  <select id="selectValidMerchants" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 25 10:03:40 CST 2015.
    -->
    select * from ti_shop_merchant where status=1
  </select>
  <update id="updateToken"  parameterType="com.mocredit.bank.entity.TiShopMerchant">
  	update ti_shop_merchant set token=#{token} where uuid=#{uuid}
  </update>
</mapper>